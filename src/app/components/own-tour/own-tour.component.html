<ng-container *ngIf="tour$ | async as tour">
  <form [formGroup]="form">
    <div class="pipe-step" data-content="tourNameGroup">
      <label for="tourName">Name of the tour</label>
      <input id="tourName"
             type="text"
             formControlName="tourName"/>
    </div>

    <div class="pipe-step">
      <div class="pipe-columns">
        <div class="pipe-column" data-content="people-range">
          <h2>Number of people on the tour</h2>
          <p-spinner formControlName="peopleNumber"
                     [min]="1"
                     [max]="100"></p-spinner>
        </div>
      </div>
    </div>

    <div class="pipe-step">
      <h2>Select geo locations on your tour</h2>

      <div data-content="steps-map-pipe">
        <ul>
          <li *ngFor="let step of tour.steps; let i = index;">
            <app-own-step [step]="step"
                          [stepLength]="steps.length"
                          [stepIndex]="i"
                          [parentForm]="form"
            ></app-own-step>
          </li>
          <li data-content="add-step">
            <button class="action" (click)="addStep()">Add new step</button>
          </li>
        </ul>

        <div data-content="map">
          // todo new map here

        </div>
      </div>
    </div>

    <div class="pipe-step">
      <div class="pipe-columns">
        <div class="pipe-column">
          <h2>Set tags which fits to theme of the route</h2>
          <p-autoComplete [suggestions]="tagsResults"
                          formControlName="tourTags"
                          [multiple]="true"
                          (completeMethod)="searchTags($event)"></p-autoComplete>
        </div>
        <div class="pipe-column">
          <h2>Restrictions for the tour:</h2>
          <p-autoComplete [suggestions]="restrictionsResults"
                          formControlName="tourRestrictions"
                          [multiple]="true"
                          (completeMethod)="searchRestrictions($event)"></p-autoComplete>
        </div>
      </div>
    </div>

    <p data-content="create-tour">
      <button class="btn-L confirmation"
              [disabled]="this.form.invalid && this.form.untouched"
              (click)="updateTour()">Update tour
      </button>
    </p>
  </form>

  <app-modal-window id="stepRemovePopup">
    <p>Are you really sure you want to delete this step?</p>
    <p>
      <button (click)="confirmRemove()">Remove</button>
      <button (click)="closeModal()">Cancel</button>
    </p>
  </app-modal-window>
</ng-container>
